(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{167:function(e,t,n){},170:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n(0),s=n.n(a),r=n(16),i=n.n(r),l=n(65),o=n(19),j=n.p+"static/media/bigWave.f28c2f1f.svg",u=n.p+"static/media/Combine.9a3ed48c.svg",p=(n(167),function(e){return Object(c.jsxs)("div",{id:"home",children:[Object(c.jsx)("div",{className:"bigWave-container",children:Object(c.jsx)("img",{src:j,alt:"bigWave",className:"bigWave"})}),Object(c.jsxs)("section",{className:"content",children:[Object(c.jsx)("div",{className:"figure-container",children:Object(c.jsx)("img",{src:u,alt:"Combine",className:"figure"})}),Object(c.jsxs)("div",{className:"intro",children:[Object(c.jsx)("h2",{className:"intro-title",children:"Share Your Love"}),Object(c.jsxs)("div",{className:"intro-text",children:[Object(c.jsx)("p",{children:"New opportunities is here to support"}),Object(c.jsx)("p",{children:"individuals and families in need at every"}),Object(c.jsx)("p",{children:"stage of life."})]}),Object(c.jsx)("button",{className:"btn join",onClick:function(){return e.history.push("/map/content")},children:"Join Now"})]})]})]})}),b=n(49),d=n(39),m=n.n(d),h=n(109),f=n(53),O=n(38),x=n(90);n(298),n(168);x.a.initializeApp({apiKey:"AIzaSyDqZlnc-bMTKq5xCjuvyyEHJcMxyG4bfck",authDomain:"peer-share-ibm.firebaseapp.com",databaseURL:"https://peer-share-ibm.firebaseio.com",projectId:"peer-share-ibm",storageBucket:"peer-share-ibm.appspot.com",messagingSenderId:"655931100370",appId:"1:655931100370:web:7deba8d61f4979e54e710b",measurementId:"G-4HNNT2T4R3"});var v=x.a.storage(),g=x.a.firestore(),N=x.a.firestore.FieldValue.serverTimestamp,k=n(161),y=n(301),w=n(308),I=n(91),C=n.p+"static/media/mapStyles.16b2a28e.bin",S=n.p+"static/media/dumpling.f26c64e1.svg",E=n(305),P=n(302),D=n(306);n(170);function U(e){var t=e.selected,n=e.setInfo,a=e.setSelected,r=s.a.useState(!1),i=Object(O.a)(r,2),l=i[0],o=i[1],j=function(){var e=Object(f.a)(m.a.mark((function e(c){var s,r,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.nickname,r=c.email,i=g.collection("users").doc(t.id),l=N(),n((function(e){return e.map((function(e){return e.id===t.id&&(e.pickNickname=s,e.pickEmail=r,e.pickDate=l,e.show=!1),e}))})),e.next=6,i.update({pickNickname:s,pickEmail:r,show:!1,pickDate:l});case 6:a(null),k.b.success("Pick Up Successfully"),o(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"infoWindow",children:[Object(c.jsxs)("div",{className:"text-info",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{role:"img","aria-label":"fire",children:"\ud83d\udd25"})," ",t.supplyName]}),Object(c.jsxs)("p",{children:["Donator: ",t.dropNickname]}),Object(c.jsx)("p",{children:"Description: "}),Object(c.jsx)("p",{children:t.description}),Object(c.jsx)("button",{className:"btn pick-btn",onClick:function(){o(!0)},children:"Pick Up"})]}),Object(c.jsx)("div",{className:"pic-info",children:Object(c.jsx)("img",{src:t.url,alt:"supply"})}),Object(c.jsx)(E.a,{title:"Picker Information",visible:l,onCancel:function(){o(!1)},footer:null,children:Object(c.jsxs)(P.a,Object(b.a)(Object(b.a)({},{labelCol:{span:6},wrapperCol:{span:16}}),{},{name:"basic",initialValues:{remember:!0},onFinish:j,children:[Object(c.jsx)(P.a.Item,{label:"Nickname",name:"nickname",rules:[{required:!0,message:"Please input your nickname!"}],children:Object(c.jsx)(D.a,{})}),Object(c.jsx)(P.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(c.jsx)(D.a,{})}),Object(c.jsx)(P.a.Item,Object(b.a)(Object(b.a)({},{wrapperCol:{offset:10}}),{},{children:Object(c.jsx)("button",{type:"submit",className:"btn form-btn",children:"Submit"})}))]}))})]})}var L=function(e){var t=e.currentUser,n=e.setInfo,a=e.info,r=s.a.useState(null),i=Object(O.a)(r,2),l=i[0],o=i[1],j=s.a.useState(!1),u=Object(O.a)(j,2),p=u[0],b=u[1],d=Object(I.d)({googleMapsApiKey:"AIzaSyByr18aj5IeQpJNBnlrGFhETnQ3My2hVyg"}),h=d.isLoaded,x=d.loadError,v=s.a.useRef(),N=s.a.useCallback((function(e){v.current=e}),[]),E={styles:C,disableDefaultUI:!1,zoomControl:!1},P=function(){var e=Object(f.a)(m.a.mark((function e(c){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=13;break}if(!t.current){e.next=10;break}return n(a.map((function(e){return e.id===t.current.id&&(e.lat=c.latLng.lat(),e.lng=c.latLng.lng(),e.drop=!0,e.show=!0),e}))),s=g.collection("users").doc(t.current.id),e.next=6,s.update({lat:c.latLng.lat(),lng:c.latLng.lng(),drop:!0,show:!0});case 6:t.current=null,b(!1),e.next=11;break;case 10:k.b.error("Please fill in the personal info before you drop");case 11:e.next=14;break;case 13:l&&o(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x?"Error":h?Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"mode",children:"Mode: "}),Object(c.jsx)(w.a,{checkedChildren:"Label",onChange:function(){b(!p)},checked:p}),!p&&Object(c.jsx)("span",{style:{marginLeft:"10px",fontWeight:"bold",color:"#e6b486"},children:"Tips: Please switch to label mode to enable the label function"}),Object(c.jsxs)(I.a,{id:"map",mapContainerStyle:{height:"500px",width:"700px"},zoom:18,center:{lat:40.714939,lng:-74.007957},options:E,onClick:P,onLoad:N,children:[a&&a.map((function(e){return e.drop&&e.show&&Object(c.jsx)(I.c,{position:{lat:e.lat,lng:e.lng},onMouseDown:function(){o(e)},icon:{url:S,origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(15,15),scaledSize:new window.google.maps.Size(30,30)}},e.id)})),l?Object(c.jsx)(I.b,{position:{lat:l.lat,lng:l.lng},onCloseClick:function(){o(null)},children:Object(c.jsx)(U,{selected:l,setInfo:n,setSelected:o})}):null]})]}):Object(c.jsx)(y.a,{size:"large"})};n(284);function z(e){var t=e.history,n=e.info,a=e.setInfo,s=e.currentUser;return Object(c.jsxs)("div",{id:"map-content",children:[Object(c.jsx)("div",{className:"map-container",children:Object(c.jsx)(L,{info:n,setInfo:a,currentUser:s})}),Object(c.jsxs)("div",{className:"show-container",children:[Object(c.jsxs)("div",{className:"drop-panel",children:[Object(c.jsx)("span",{className:"font_I",children:"I"}),Object(c.jsx)("span",{className:"font_C",children:"C"}),Object(c.jsx)("span",{className:"font_an",children:"an"}),Object(c.jsx)("button",{onClick:function(){t.push("/map/add")},className:"btn drop",children:"Drop"})]}),Object(c.jsxs)("div",{className:"user-panel",children:[n.length>0&&n.map((function(e){return e.drop&&Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:e.dropNickname}),Object(c.jsx)("span",{className:"drop",children:" drop "}),Object(c.jsx)("span",{children:e.supplyName})]},e.id)})),n.length>0&&n.map((function(e){return e.drop&&!e.show&&Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:e.pickNickname}),Object(c.jsx)("span",{className:"pick",children:" pick up "}),Object(c.jsx)("span",{children:e.supplyName})]},e.id)}))]})]})]})}var M=n(307),T=n(66),W=function(e,t,n,c,a,s,r){return{id:e,dropNickname:t,dropEmail:n,supplyName:c,description:s||"",url:a,lat:null,lng:null,show:!1,pickNickname:null,pickEmail:null,drop:!1,dropDate:r,pickDate:null}};function q(e){var t=e.url,n=e.setInfo,a=e.info,s=e.history,r=e.currentUser,i=function(){var e=Object(f.a)(m.a.mark((function e(c){var i,l,o,j,u,p,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.nickname,l=c.email,o=c.supplyName,j=c.description,!t){e.next=13;break}return u=Object(M.a)(),p=g.collection("users").doc(u),b=N(),n([].concat(Object(h.a)(a),[W(u,i,l,o,t,j,b)])),r.current=W(u,i,l,o,t,j,b),e.next=9,p.set(W(u,i,l,o,t,j,b));case 9:k.b.success("Register Successfully"),s.push("/map/content"),e.next=14;break;case 13:k.b.error("Please upload the picture of your supply");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(P.a,Object(b.a)(Object(b.a)({},{labelCol:{span:10},wrapperCol:{span:18}}),{},{name:"basic",initialValues:{remember:!0},onFinish:i,onFinishFailed:function(e){k.b.error(e)},children:[Object(c.jsx)(P.a.Item,{label:"Nickname",name:"nickname",rules:[{required:!0,message:"Please input your nickname"}],children:Object(c.jsx)(D.a,{})}),Object(c.jsx)(P.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(c.jsx)(D.a,{})}),Object(c.jsx)(P.a.Item,{label:"Supply Name",name:"supplyName",rules:[{required:!0,message:"Please input your email!"}],children:Object(c.jsx)(D.a,{})}),Object(c.jsx)(P.a.Item,{label:"Description",name:"description",children:Object(c.jsx)(D.a.TextArea,{})}),Object(c.jsx)(P.a.Item,{children:Object(c.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}var A=function(e){var t=Object(a.useState)(0),n=Object(O.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(null),i=Object(O.a)(r,2),l=i[0],o=i[1],j=Object(a.useState)(null),u=Object(O.a)(j,2),p=u[0],b=u[1];return Object(a.useEffect)((function(){if(e){var t=v.ref(e.name);t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){o(e)}),Object(f.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,b(n);case 4:case"end":return e.stop()}}),e)}))))}}),[e]),{progress:c,url:p,error:l}},B=n(303),F=n(304);n(285);function R(e){var t=e.urlSet,n=s.a.useState(null),a=Object(O.a)(n,2),r=a[0],i=a[1],l=A(r),o=l.url,j=l.progress,u=["image/png","image/jpeg","image/jpg"];s.a.useEffect((function(){t(o)}),[o,t]);return Object(c.jsxs)("form",{id:"upload-form",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&u.includes(t.type)?i(t):(i(null),k.b.error("Please select an image file (png or jpg)"))}}),"Click to upload"]}),Object(c.jsxs)("div",{className:"output",children:[r&&Object(c.jsx)(B.a,{percent:j,size:"small"}),r&&o?Object(c.jsx)("img",{src:o,alt:"supply"}):Object(c.jsx)(F.a.Image,{className:"Skeleton"})]})]})}n(288);function J(e){var t=e.history,n=e.setInfo,a=e.info,r=e.currentUser,i=s.a.useState(null),l=Object(O.a)(i,2),o=l[0],j=l[1];return Object(c.jsxs)("div",{id:"register",children:[Object(c.jsx)("div",{className:"back-container",children:Object(c.jsx)("button",{onClick:function(){t.push("/map/content")},className:"btn back",children:"COME BACK"})}),Object(c.jsxs)("div",{className:"main",children:[Object(c.jsx)("div",{className:"form-content",children:Object(c.jsx)(q,{setInfo:n,url:o,info:a,history:t,currentUser:r})}),Object(c.jsx)("div",{className:"picture-content",children:Object(c.jsx)(R,{urlSet:j})})]})]})}var K=n.p+"static/media/smallWave.701a4848.svg",V=(n(289),function(){var e=s.a.useState([]),t=Object(O.a)(e,2),n=t[0],a=t[1],r=s.a.useRef(null);return s.a.useEffect((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.collection("users"),e.next=3,t.get();case 3:e.sent.forEach((function(e){return a((function(t){return[].concat(Object(h.a)(t),[e.data()])}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===n.length&&e()}),[n,a]),Object(c.jsxs)("div",{id:"Map",children:[Object(c.jsx)("div",{className:"smallWave-container",children:Object(c.jsx)("img",{src:K,alt:"smallWave"})}),Object(c.jsx)("div",{className:"content",children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/map/content",render:function(e){return Object(c.jsx)(z,Object(b.a)(Object(b.a)({},e),{},{info:n,setInfo:a,currentUser:r}))}}),Object(c.jsx)(o.b,{path:"/map/add",render:function(e){return Object(c.jsx)(J,Object(b.a)(Object(b.a)({},e),{},{setInfo:a,info:n,currentUser:r}))}}),Object(c.jsx)(o.a,{to:"/map/content"})]})})]})}),_=(n(293),function(){return Object(c.jsx)("div",{id:"main",children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{component:p,path:"/home"}),Object(c.jsx)(o.b,{component:V,path:"/map"}),Object(c.jsx)(o.a,{to:"/home"})]})})}),G=(n(294),function(){return Object(c.jsxs)("div",{id:"sidebar",style:{position:"fixed",left:"0",top:"0"},children:[Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)("span",{className:"title-left",children:"Peer"}),Object(c.jsx)("span",{className:"title-right",children:"Share"})]}),Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsx)(l.b,{to:"/home",activeClassName:"selected",children:"Home"}),Object(c.jsx)(l.b,{to:"/map",activeClassName:"selected",children:"Map"})]})]})}),H=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(G,{}),Object(c.jsx)(_,{})]})};var Q=function(){return Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(H,{})})})};n(295),n(296);i.a.render(Object(c.jsx)(Q,{}),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.811875e0.chunk.js.map